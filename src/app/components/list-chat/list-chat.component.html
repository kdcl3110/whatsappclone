<ion-list >
  <span *ngFor="let chat of mesChats">
    <span *ngIf="chat.payload.doc.data().message.length != 0">
      <ion-item
        *ngIf="chat.payload.doc.data().type == 'goup'" 
        button 
        [routerLink]="['/tabs/chat-group-detail', chat.payload.doc.data().cid]">
        <ion-label>
          <ion-row>
            <ion-col size="3">
              <img class="profil"
                [src]="(cahtImage[chat.payload.doc.data().cid]) ? geturl(cahtImage[chat.payload.doc.data().cid]) : ''"
              >
            </ion-col>
            <ion-col size="6">
              <ion-label>
                <h3> {{chat.payload.doc.data().nom}}</h3>
                <ion-note>
                  <small>
                    {{chat.payload.doc.data().message[chat.payload.doc.data().message.length - 1].message}}
                    {{chat.payload.doc.data().message[chat.payload.doc.data().message.length - 1].dateEnv.toDate() | date:'HH:mm'}}
                  </small>
                </ion-note>
              </ion-label>
            </ion-col>
            <ion-col size="3">
              <ion-note>{{chat.payload.doc.data().dataModif.toDate() | date:'dd/MM/yy'}}</ion-note>
            </ion-col>
          </ion-row>
        </ion-label>
      </ion-item>
      <ion-item
        *ngIf="chat.payload.doc.data().type == 'unique'" 
        button 
        [routerLink]="['/tabs/chat-detail', findUser(chat).uid]"> 
        <ion-label>
          <ion-row>
            <ion-col size="3">
              <img class="profil"
                [src] = "chatService.imageUser[findUser(chat).uid] ? geturl(chatService.imageUser[findUser(chat).uid]) :''"
                alt=""
              >
            </ion-col>
            <ion-col size="6">
              <ion-label>
                <h3> {{findUser(chat).displayName}}</h3>
                <ion-note>
                  <ion-icon color="primary" name="checkmark-done-outline"></ion-icon>
                  <small>
                    {{chat.payload.doc.data().message[chat.payload.doc.data().message.length - 1].message}}
                    {{chat.payload.doc.data().message[chat.payload.doc.data().message.length - 1].dateEnv.toDate() | date:'HH:mm'}}
                  </small>
                </ion-note>
              </ion-label>
            </ion-col>
            <ion-col size="3">
              <ion-note>{{chat.payload.doc.data().dataModif.toDate() | date:'dd/MM/yy'}}</ion-note>
            </ion-col>
          </ion-row>
        </ion-label>
      </ion-item>
    </span>
  </span>
</ion-list>